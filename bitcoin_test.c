#include <stdio.h>
#include <string.h>
#include "bitcoin.h"

// Genesis block header for testing
// Note: in <bitcoin.c> the known genenis nonce is used for quick test
BYTE block_header[80] = {
    //Version
    0x01, 0x00, 0x00, 0x00,
    //Previous Block Hash
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    /*Merkle Root - if run out nonce, reorder transactions to get difference root
    coinbase transaction also has arbitrary fields to modify and get different root*/
    0x3b, 0xa3, 0xed, 0xfd, 0x7a, 0x7b, 0x12, 0xb2,
    0x7a, 0xc7, 0x2c, 0x3e, 0x67, 0x76, 0x8f, 0x61,
    0x7f, 0xc8, 0x1b, 0xc3, 0x88, 0x8a, 0x51, 0x32,
    0x3a, 0x9f, 0xb8, 0xaa, 0x4b, 0x1e, 0x5e, 0x4a,
    //Timestamp - if run out nonce, modify slightly within RULES
    0x29, 0xab, 0x5f, 0x49,
    //Target - Compact form
    0xff, 0xff, 0x00, 0x1d,
    //nonce - will be updated
    0x00, 0x00, 0x00, 0x00
};

int main()
{
    BYTE target[SHA256_BLOCK_SIZE];
    //Target in Big Endian Format
    memset(target, 0x00, 32);   
    target[4] = 0xff;
    target[5] = 0xff;      
    bitcoin_mine(block_header, target);  
    return 0;
}